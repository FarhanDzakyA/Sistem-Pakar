<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sistem Pakar - Gejala</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <h1>Daftar Gejala</h1>
    <form id="gejalaForm">
        <!-- Generate menggunakan JS -->
    </form>
    <script>
        document.addEventListener("DOMContentLoaded", function () {
            const gejalaDataset = [
                { id: "G001", gejala: "Tidak berminyak" },
                { id: "G002", gejala: "Segar dan halus" },
                { id: "G003", gejala: "Bahan-bahan kosmetik mudah menempel di kulit." },
                { id: "G004", gejala: "Terlihat sehat" },
                { id: "G005", gejala: "Tidak berjerawat" },
                { id: "G006", gejala: "Mudah dalam memilih kosmetik." },
                { id: "G007", gejala: "Pori-pori kulit besar terutama di area hidung, pipi, dagu" },
                { id: "G008", gejala: "Kulit di bagian wajah terlihat mengkilat" },
                { id: "G009", gejala: "Sering ditumbuhi jerawat" },
                { id: "G010", gejala: "Kulit kelihatan kering sekali" },
                { id: "G011", gejala: "Pori-pori halus" },
                { id: "G012", gejala: "Tekstur kulit wajah tipis" },
                { id: "G013", gejala: "Cepat menampakkan kerutan-kerutan" },
                { id: "G014", gejala: "Sebagian kulit kelihatan berminyak" },
                { id: "G015", gejala: "Sebagian kulit kelihatan kering" },
                { id: "G016", gejala: "Kadang berjerawat" },
                { id: "G017", gejala: "Susah mendapat hasil polesan kosmetik yang sempurna" },
                { id: "G018", gejala: "Mudah alergi" },
                { id: "G019", gejala: "Mudah iritasi dan terluka" },
                { id: "G020", gejala: "Kulit mudah terlihat kemerahan." }
            ];

            const cfInput = [
                { kondisi: "Tidak Tahu", cf: 0 },
                { kondisi: "Kemungkinan", cf: 0.4 },
                { kondisi: "Kemungkinan Besar", cf: 0.6 },
                { kondisi: "Hampir Pasti", cf: 0.8 },
                { kondisi: "Pasti", cf: 1 }
            ];

            const pembobotanGejala = {
                normal: [{ id: "G001", bobot: 0.8 }, { id: "G002", bobot: 0.8 }, { id: "G004", bobot: 0.8 }, { id: "G005", bobot: 0.8 }],
                berminyak: [{ id: "G007", bobot: 0.8 }, { id: "G008", bobot: 0.8 }, { id: "G009", bobot: 0.8 }],
                kering: [{ id: "G010", bobot: 0.8 }, { id: "G012", bobot: 0.8 }, { id: "G013", bobot: 0.8 }],
                kombinasi: [{ id: "G014", bobot: 0.8 }, { id: "G015", bobot: 0.8 }],
                sensitif: [{ id: "G018", bobot: 0.8 }, { id: "G019", bobot: 0.8 }]
            };

            const form = document.getElementById("gejalaForm");

            gejalaDataset.forEach(item => {
                const div = document.createElement("div");
                div.className = "form-group";

                const label = document.createElement("label");
                label.htmlFor = item.id;
                label.textContent = item.gejala;

                const select = document.createElement("select");
                select.id = item.id;

                const defaultOption = document.createElement("option");
                defaultOption.value = "";
                defaultOption.textContent = "-- Pilih Jawaban --";
                defaultOption.disabled = true;
                defaultOption.selected = true;
                select.appendChild(defaultOption);

                cfInput.forEach(optionItem => {
                    const option = document.createElement("option");
                    option.value = optionItem.cf;
                    option.textContent = optionItem.kondisi;
                    select.appendChild(option);
                });

                div.appendChild(label);
                div.appendChild(select);
                form.appendChild(div);
            });

            const button = document.createElement("button");
            button.textContent = "Hitung Hasil";
            button.type = "button";
            form.appendChild(button);

            button.addEventListener("click", () => {
                const hasil = {};
                for (const jenis in pembobotanGejala) {
                    let total = 0;
                    pembobotanGejala[jenis].forEach(item => {
                        const cf = parseFloat(document.getElementById(item.id).value) || 0;
                        total += cf * item.bobot;
                    });
                    hasil[jenis] = total / pembobotanGejala[jenis].length;
                }

                const highest = Object.keys(hasil).reduce((a, b) => hasil[a] > hasil[b] ? a : b);

                // Redirect ke halaman rekomendasi dengan hasil
                window.location.href = `rekomendasi.html?hasil=${highest}`;
            });
        });
    </script>
</body>
</html>
